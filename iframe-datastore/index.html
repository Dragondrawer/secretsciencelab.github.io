<html>
 <head>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
 </head>
 <body>
  <input type="hidden" id="data"></input>

  <script>
    // load from session storage
    var sessionData = window.sessionStorage.getItem("data");
    if (sessionData)
      $("#data").val(sessionData);

    window.addEventListener("message", receiveMessage, false);

    function receiveMessage(event)
    {
      //console.log("origin: " + event.origin);  
      //console.log(event.source);  
      //console.log(event.data);

      // save to session storage
      $("#data").val(event.data);
      window.sessionStorage.setItem("data", event.data);

      parent.postMessage(JSON.stringify({
        "topic": "saved"
      }), window.location.protocol + "//" + window.location.host);
    }

    $(document).ready(function() {
      parent.postMessage(JSON.stringify({
        "topic": "ready"
      }), window.location.protocol + "//" + window.location.host);
    });

  </script>
 </body>
</html>
